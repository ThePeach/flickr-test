<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">

    <script type="text/javascript">
//        (function() {
            function cb(data) {
                //use returned data

                console.log(data["items"][1]["link"]);

                var containingDiv = document.createElement('DIV');


                for (var i = 0; i < data["items"].length; i++) {
                    var img = document.createElement('IMG');
                    img.src = data["items"][i]["media"]["m"];
                    img.alt = data["items"][i]["title"];
                    img.width = "200";
                    img.height = "200";
                    containingDiv.appendChild(img);
                }

                document.body.appendChild(containingDiv);

                function toggle(e) {
                    console.log('clicked');
                    console.log(e.target.getAttribute("class"));
//                    console.log(e.target.hasAttribute("class"));

                    if (!e.target.hasAttribute("class")) {
                        console.log('yup');
                        var att = document.createAttribute("class");
                        att.value = "selected";
                        e.target.setAttributeNode(att);
                        return;

                    }

                    if (e.target.getAttribute("class") === "selected") {
                        e.target.setAttribute("class", "unselected");
                    }
                    else {
                        e.target.setAttribute("class", "selected");
                    }

                }

                containingDiv.addEventListener('click', toggle, false);


            }






            var tags = 'london';
            var script = document.createElement('script');
            script.src = 'http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=cb& tags=' + tags;
            document.head.appendChild(script);

//        })();

    </script>
</head>
<body></body>
</html>